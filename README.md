# Блок Kotlin и Окружение (семинары)

## Урок 4. Практика по исключениям и взаимодействию с Java

### Задание

Продолжаем дорабатывать домашнее задание из предыдущего семинара. За основу берём код решения из предыдущего домашнего задания.

- Добавьте новую команду export, которая экспортирует добавленные значения в текстовый файл в формате JSON. Команда принимает путь к новому файлу. Например
export /Users/user/myfile.json
- Реализуйте DSL (предметно ориентированный язык) на Kotlin, который позволит конструировать JSON и преобразовывать его в строку.
- Используйте этот DSL для экспорта данных в файл.
- Выходной JSON не обязательно должен быть отформатирован, поля объектов могут идти в любом порядке. Главное, чтобы он имел корректный синтаксис. Такой вывод тоже принимается:
 ```json
    [{"emails": ["ew@huh.ru"],"name": "Alex","phones": ["34355","847564"]},{"emails": [],"name": "Tom","phones": ["84755"]}]
```

Записать текст в файл можно при помощи удобной функции-расширения writeText:

```kotlin
File("/Users/user/file.txt").writeText("Text to write")
```
Под капотом она использует такую конструкцию

```kotlin
    FileOutputStream(file).use {
        it.write(text.toByteArray(Charsets.UTF_8))
    }
```
